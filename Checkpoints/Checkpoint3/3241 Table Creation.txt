CREATE TABLE PERSON (
    ID INT NOT NULL,
    First_Name TEXT NOT NULL,
    Middle_Name TEXT,
    Last_Name TEXT NOT NULL,
    PRIMARY KEY(ID)
);


CREATE TABLE CUSTOMER (
    Cust_Id INT NOT NULL,
    Phone_Oo INT,
    FOREIGN KEY (Cust_Id) REFERENCES PERSON(ID), 
    PRIMARY KEY(Cust_Id);
);


CREATE TABLE AUTHOR (
    Auth_Id INT NOT NULL,
    FOREIGN KEY (Auth_Id) REFERENCES PERSON(ID),
    PRIMARY KEY(Auth_Id)
);


CREATE TABLE MEMBERSHIP (
    Mem_Id INT NOT NULL,
    Email TEXT NOT NULL,
    Password TEXT NOT NULL,
    FOREIGN KEY (Mem_Id) REFERENCES CUSTOMER(Cust_Id),
    PRIMARY KEY(Mem_Id);
);


CREATE TABLE PURCHASE (
    Price REAL NOT NULL,
    Books TEXT NOT NULL,
    Date DATE NOT NULL,
    Order_No INT NOT NULL,
    Cust_Id INT NOT NULL,
    FOREIGN KEY (Cust_Id) REFERENCES CUSTOMER(Cust_Id),
    FOREIGN KEY (Order_No) REFERENCES BOOKS(Order_No),
    PRIMARY KEY(Order_num);
);


CREATE TABLE BOOKSTORE (
    Store_Id INT NOT NULL,
    Name TEXT NOT NULL,
    PRIMARY KEY(Store_Id);
);


CREATE TABLE BOOK (
    Title TEXT NOT NULL,
    ISBN INT NOT NULL,
    Price REAL NOT NULL,
    Year INT,
    Category TEXT,
    Auth_Id INT NOT NULL,
    Publ_Id INT NOT NULL,
    FOREIGN KEY (Auth_Id) REFERENCES AUTHOR(Auth_Id),
    FOREIGN KEY (Publ_Id) REFERENCES AUTHOR(Publ_Id),
    PRIMARY KEY(ISBN)
);


CREATE TABLE PUBLISHER (
    Publ_Id INT NOT NULL,
    PRIMARY KEY(Pub_Id);
);


CREATE TABLE STORES (
    QUANTITY INT NOT NULL,
    Store_Id INT NOT NULL,
    ISBN INT NOT NULL,
    FOREIGN KEY (ISBN) REFERENCES BOOK(ISBN),
    FOREIGN KEY (Store_Id) REFERENCES BOOKSTORE(Store_Id),
    PRIMARY KEY(ISBN, Store_Id);
);


CREATE TABLE BOOKS (
    QUANTITY INT NOT NULL,
    Order_num INT NOT NULL,
    ISBN INT NOT NULL,
    FOREIGN KEY (ISBN) REFERENCES BOOK(ISBN),
    FOREIGN KEY (Order_num) REFERENCES BOOKSTORE(Order_num)
    PRIMARY KEY(ISBN, Order_num)
);